<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Đơn Hàng</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../assets/bootstrap-icons-1.11.3/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="../assets/css/thuan.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="../assets/js/angular.min.js"></script>
  <script src="../assets/js/angular-route.js"></script>
  <script src="../assets/js/app.js"></script>
  <script src="../assets/js/order1.js"></script>

  <style>
    body {
      background-color: #f8f9fa;
    }

    .order {
      padding: 15px;
      /* Giảm padding */
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin: 15px;
      /* Giảm margin */
    }

    .cart-header {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
      /* Giảm khoảng cách */
    }

    .table-order {
      margin-top: 10px;
      /* Giảm khoảng cách */
    }

    .table th {
      background-color: #d38450;
      color: white;
      text-align: center;
    }

    .table td {
      text-align: center;
    }

    .fw-bold {
      font-weight: bold;
    }

    .total-price {
      font-size: 18px;
      font-weight: bold;
      color: #cc3300;
    }

    .button-order {
      margin-top: 10px;
      /* Giảm khoảng cách */
      text-align: center;
    }

    .progress {
      height: 10px;
      margin-bottom: 5px;
      /* Giảm khoảng cách */
    }

    .progress-bar {
      background-color: #d38450;
    }

    @media (max-width: 768px) {
      .order {
        padding: 10px;
      }

      .cart-header {
        font-size: 20px;
      }
    }
  </style>
</head>

<body ng-app="myApp" ng-controller="CheckLogin">
  <div ng-include="'layout/header.html'"></div>
  <div ng-include="'layout/menu.html'"></div>
  <div class="setDoDaiTrang">
    <div class="order-container">
      <div class="container mt-4">
        <div class="content-wrapper" ng-controller="OrderController">
          <h3 class="order-header">Đơn HÀNG CỦA BẠN</h3>
          <h5 class="order-subtitle">
            Đơn HÀNG của bạn (<b class="cart-cnt">{{ products.length }}</b> sản
            phẩm)
          </h5>

          <div ng-if="loading" class="empty-message">Đang tải đơn hàng...</div>
          <div ng-if="!loading && products.length === 0" class="empty-message">
            Không tìm thấy đơn hàng.
          </div>

          <!-- Tabs Navigation -->
          <ul class="nav nav-tabs justify-content-center" id="orderTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <a class="nav-link active" id="pending-tab" data-bs-toggle="tab" href="#pending" role="tab"
                aria-controls="pending" aria-selected="true">Đang Xác Nhận</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="delivered-tab" data-bs-toggle="tab" href="#delivered" role="tab"
                aria-controls="delivered" aria-selected="false">Đang Giao Hàng</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="completed-tab" data-bs-toggle="tab" href="#completed" role="tab"
                aria-controls="completed" aria-selected="false">Hoàn Thành</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="cancelled-tab" data-bs-toggle="tab" href="#cancelled" role="tab"
                aria-controls="cancelled" aria-selected="false">Hủy</a>
            </li>
          </ul>

          <!-- Tabs Content -->
          <div class="tab-content mt-4">
            <!-- Tab Đang Xác Nhận -->
            <div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
              <div class="table-responsive">
                <table class="table table-striped table-bordered">
                  <thead class="table-header">
                    <tr>
                      <th>#</th>
                      <th>ID</th>
                      <th>Tên Sản Phẩm</th>
                      <th>Kích cỡ</th>
                      <th>Số Lượng</th>
                      <th>Giá</th>
                      <th>Ngày Đặt Hàng</th>
                      <th>Địa Chỉ Giao Hàng</th>
                      <th>Trạng thái</th>
                      <th>Hành động</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="order in pendingOrders">
                      <td>{{$index + 1}}</td>
                      <td>{{ order.order.idorder }}</td>
                      <td>
                        <a href="#" ng-click="goToProduct(order.productdetail.product.idproduct, order)">
                          {{ order.productdetail.product.productname }}
                        </a>
                      </td>
                      <td>{{ order.productdetail.size.sizename }}</td>
                      <td>{{ order.quantity }}</td>
                      <td>
                        {{ formatCurrency(order.productdetail.unitprice) }}
                      </td>
                      <td>{{ order.order.orderdate | date:'short' }}</td>
                      <td>{{ order.order.addressdetail }}</td>
                      <td>{{ order.status }}</td>
                      <td>
                        <button type="button" class="btn btn-danger btn-sm" ng-click="cancelOrder(order)">
                          Hủy
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div ng-if="pendingOrders.length === 0" class="empty-message">
                  Không có đơn hàng nào đang xác nhận.
                </div>
              </div>
            </div>

            <!-- Các tab khác giống với tab Đang Xác Nhận, chỉ thay đổi ng-repeat -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <div ng-include="'layout/footer.html'"></div>
  <script src="../assets/js/bootstrap.bundle.js"></script>
</body>

</html>